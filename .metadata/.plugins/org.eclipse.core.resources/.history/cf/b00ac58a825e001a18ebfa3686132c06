#include <stdio.h>
#include <stdlib.h>

#include <sys/neutrino.h>
#include <sys/netmgr.h>

int main(int argc, char* argv[]) {
	pid_t displaypid;
	int coid;
	int chid;
	int rcvid;

	// TODO: Replace with number of required arguments
	if(argc != 5) {
		fprintf(stderr, "Wrong number of arguments\n");
		exit(EXIT_FAILURE);
	}

	serverpid = atoi(argv[1]);

	if(chid = ChannelCreate(0)) {
		//TODO: Add error handling
	}

	//TODO: Attach to display - need nid, chid, coid
	if((coid = ConnectAttach(ND_LOCAL_NODE, serverpid, 1, _NTO_SIDE_CHANNEL, 0)) == -1) {
		fprintf (stderr, "ConnectAttach error\n");
		perror (NULL);
		exit(EXIT_FAILURE);
	}

	while(1) {
		if(rcvid = MsgReceive(chid, &msg, sizeof( client_send_t ), NULL)) < 0) {

		}
	}

	return EXIT_SUCCESS;
}
